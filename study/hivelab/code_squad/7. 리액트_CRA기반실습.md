

---

### TODO 애플리케이션 UI

input 으로 할일 입력받기

아래 할일 리스트가 노출

초기 할일리스트는 서버에서 받아서 렌더링(JSON받기)



------

### React Web Site Tutorial

Creact React App 기반으로 프로젝트 해보기
https://reactjs.org/tutorial/tutorial.html





#### 환경구성

```shell
] npx create-react-app mytodo

] npm start 


```

- 서버가 뜸 

- App.js 코드 분석하기 



#### App.js 수정

```react
import React, { useState } from 'react';
import './App.css';
import List from './List.jsx'

const App = () => {
 
  return (
    <>
    <h1>todo 애플리케이션</h1>

    <form action="">
      <input type="text" name="" />
      <button>할일추가</button>
    </form>

    <List />
    </>
  )
}

export default App;

```



#### List.jsx 구현

```react
import React from 'react'

const List = () => {
  return (
    <ul>
        <li>그냥놀기</li>
    </ul>
  )
}
export default List
```



#### App.js 에 todo useState추가

```react
const [todos,. setTodo] = useState(['js공부']);
```



#### List에 todos 를 전달하고, List에서 todos를 렌더링



```react
<List todos = {todos} />
```



```react
import React, {useContext} from 'react'

const List = ({todos}) => {

  const todoList = todos.map( (todo) => <li>{todo}</li> )

  return (
    <ul>
        {todoList}
    </ul>
  )
}
export default List
```



여기까지 잘 이해해보기!





#### 할일추가 기능만들기

- 할일이 입력되면 onChange이벤트를 활용해서 새로운 todo내용을 저장한다.
  - 새로운 todo정보를 저장하기 위한 useState를 추가한다. 

- '할일추가' 버튼이 클릭되면 setTodo를 호출해서 데이터를 추가한다.

```react
import React, { useState, useEffect } from 'react';
import './App.css';
import List from './List.jsx';

const App = () => {
  const [todos, setTodos] = useState([]);
  const [newTodo, setNewTodo] = useState();

  const changeInputData = (e) => {
    setNewTodo(e.target.value);
  }

  const addTodo = (e) => {
		//setTodo에 데이터를 추가하는 로직 추가.
  }

  return (
    <>
    <h1>todo 애플리케이션</h1>

    <form action="">
      <input type="text" name="" onChange={changeInputData}/>
      <button onClick={addTodo}>할일추가</button>
    </form>

    <List todos={todos} />
    </>
  )
}

export default App;

```



#### useEffect 

컴포넌트의 라이프사이클 마지막에 필요한 처리가 필요할 수 있다. 주로 서버에 데이터를 요청하는 경우등에 필요하다.

아래 코드를 추가해보자.

```react
useEffect ( ()=> {
  console.log("새로운 렌더링!", todos);
}, [todos])
```



---

#### 서버통신

초기 할일리스트를 서버로부터 받아서 렌더링하기 위해 아래 데이터를 받는다고 가정하자.

서버환경이 없으니, 현재 CRA가 제공해주는 public디렉토리에 두고 접근하도록 한다.



**mytodo/public/data.json** 에 아래내용을 추가하고 저장한다.

```javascript
[
  {"title":"공부하기","id":1233,"status":"todo"},
  {"title":"스터디준비","id":1234,"status":"todo"},
  {"title":"알고리즘공부","id":1230,"status":"todo"},
  {"title":"컴퓨터게임","id":1231,"status":"todo"}
]
```

브라우저 주소창에, http://localhost:3000/data.json 를 입력해서 위 내용이 보이면  정상이다.



App.js에서 useEffect에서 서버통신을 위한 함수를 호출하자.

```react
const fetchInitialData = async () => {
  //fetch API로 서버에 요청하는 코드를 구현해보자.
  //요청응답 수신 후, setTodos 메서드를 통해 초기데이터를 추가하도록 한다.
}

useEffect ( () => {
	fetchInitialData(http://localhost:3001/data.json);
}, []) //빈배열을 두 번째 인자로 주면, 초기에만 콜백함수가 실행됨.

```



서버로 받은 todolist가 객체형태임으로, List에 컴포넌트에 전달되는 todos역시 객체이다. 

따라서 **List컴포넌트에서** todos 객체를 파싱하도록 수정한다.

```react
todoList = todos.map( (todo) => <li key={todo.id}>{todo.title}</li>)
```



---

#### 이후 할만한 것들

- 데이터 수신 중에는 loading이 나오도록 한다. 
- **useFetch** 라는 **custom hook** 을 만들어서, 다른 컴포넌트에서도 데이터통신작업에서 **재사용**할 수 있도록 해보자.
- todo 리스트 갯수를 화면에 보여주는 기능을 만들어보자. (Header.jsx 컴포넌트 신규 개발)
- 할일리스트 하나를 클릭하면, 완료처리하도록 변경해보기.
- useContext API, useReducer



---

**[참고]**

[실습저장소](<https://github.com/nigayo/__todotest__>)

유튜브 훅 영상

