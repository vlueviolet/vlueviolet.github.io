<!DOCTYPE HTML>
<html>

<head>
  <link rel="stylesheet" type="text/css" href="./assets/stylesheet/normalize.css">
  <link rel="stylesheet" type="text/css" href="./assets/stylesheet/style.css">
</head>

<body>
  <canvas id="canvas" width="2000" height="1200"></canvas>
  <script>
    // create a full screen canvas
    var canvas = document.createElement("canvas");
    canvas.style.position = "absolute";
    canvas.style.left = "0px";
    canvas.style.top = "0px";
    canvas.style.zIndex = 10;
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    document.body.appendChild(canvas);
    // var to hold context
    var ctx;


    // load an image
    var image = new Image();
    image.src = "https://i.stack.imgur.com/C7qq2.png?s=328&g=1";
    // add resize event
    var resize = function () {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      ctx = canvas.getContext("2d");
    }
    // add mouse event. Because it is full screen no need to bother with offsets
    var mouse = function (event) {
      posX = event.clientX;
      posY = event.clientY;
    }
    // incase the canvas size is changed
    window.addEventListener("resize", resize);

    // listen to the mouse move
    canvas.addEventListener("mousemove", mouse)

    // Call resize as that gets our context
    resize();

    // define the gradient
    var cirRadius = 300;

    var posX = 100; // this will be set by the mouse
    var posY = 100;
    var RGB = [0, 0, 0]; // black any values from 0 to 255
    var alphas = [0, 0.1, 0.2, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1]; // zero is transparent one is not

    // the update function
    var update = function () {
      if (ctx) { // make sure all is in order..
        if (image.complete) { // draw the image when it is ready
          ctx.drawImage(image, 0, 0, canvas.width, canvas.height)
        } else { // while waiting for image clear the canvas
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
        // create gradient
        var grad = ctx.createRadialGradient(posX, posY, 0, posX, posY, cirRadius);
        // add colour stops
        var len = alphas.length - 1;
        alphas.forEach((a, i) => {
          grad.addColorStop(i / len, `rgba(${RGB[0]},${RGB[1]},${RGB[2]},${a})`);
        });
        // set fill style to gradient
        ctx.fillStyle = grad;
        // render that gradient
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      }
      requestAnimationFrame(update); // keep doing it till cows come home.

    }
    // start it all happening;
    requestAnimationFrame(update);
  </script>
</body>

</html>